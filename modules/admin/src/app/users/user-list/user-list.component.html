<div id="content-container">
  <div id="content-header" class="titlebar">
    <h1 class="titlebar-title">Users</h1>
    <button class="titlebar-button" routerLink="/users/create">Add User</button>
  </div>

  <div id="content-main">
    <div id="content">
      <div class="mui-container-fluid">
        <!-- if there are no virtues, show this message -->
        <div *ngIf="users.length < 1" class="mui-row margin-top-10">
          <div class="mui-col-md-12 padding-left-0">
            <p class="no-data-message">
              No users have been added at this time. To add a user, click on the button "Add User" above.
            </p>
          </div>
        </div>
      </div>
      <!-- if there are users, show this list -->
      <div *ngIf="users.length > 0" class="mui-container-fluid">
        <div class="mui-row users-filters">
          <div class="mui-col-md-12 padding-left-0 filters">
            <span *ngIf="sortValue === '*'">All User Accounts</span>
            <a *ngIf="sortValue !== '*'"  (click)="enabledUserList('enabled','*', sortType)">All User Accounts</a> |
            <span *ngIf="sortValue === true">Active Accounts</span>
            <a *ngIf="sortValue !== true" (click)="enabledUserList('enabled', true, sortType)">Enabled Accounts</a> |
            <span *ngIf="sortValue === false">Disabled Accounts</span>
            <a *ngIf="sortValue !== false" (click)="enabledUserList('enabled', false, sortType)">Disabled Accounts</a>
          </div>
        </div>
      </div>

      <div class="mui-container-fluid data-list">
        <div class="mui-row table-header-group">
          <div class="table-header mui-col-md-3">
            <a (click)="setColumnSortDirection('username',sortBy)">Username</a>
            <span class="list-sorter">
              <span *ngIf="sortColumn === 'username' && sortBy === 'asc'" class="fa fa-sort-up"></span>
              <span *ngIf="sortColumn === 'username' && sortBy === 'desc'" class="fa fa-sort-down"></span>
              <span class="fa fa-sort font-color-gray"></span>
            </span>
          </div>

          <!-- <div class="table-header mui-col-md-3">Authorities</div> -->
          <div class="table-header mui-col-md-3">
            <a (click)="setColumnSortDirection('authorities',sortBy)">Authorized Roles</a>
            <span class="list-sorter">
              <span *ngIf="sortColumn === 'authorities' && sortBy === 'asc'" class="fa fa-sort-up"></span>
              <span *ngIf="sortColumn === 'authorities' && sortBy === 'desc'" class="fa fa-sort-down"></span>
              <span class="fa fa-sort font-color-gray"></span>
            </span>
          </div>

          <div class="table-header mui-col-md-4">Available Virtues</div>
          <!-- <div class="table-header mui-col-md-3">Status</div> -->
          <div class="table-header mui-col-md-3">
            <a (click)="setColumnSortDirection('status',sortBy)">User Status</a>
            <span class="list-sorter">
              <span *ngIf="sortColumn === 'status' && sortBy === 'asc'" class="fa fa-sort-up"></span>
              <span *ngIf="sortColumn === 'status' && sortBy === 'desc'" class="fa fa-sort-down"></span>
              <span class="fa fa-sort font-color-gray"></span>
            </span>
          </div>

        </div>
        <div class="mui-row table-row" *ngFor="let u of users | listFilter : sortColumn : sortType : sortValue : sortBy"
              [ngStyle]="{'background-color':u.enabled ? '#ffffff' : '#eeeeee' }" appActiveClass>
          <div class="table-data mui-col-md-2 user-transparent">
            <div class="mini-menu">
              <a class="edit" routerLink="/users/edit/{{u.username}}">{{ u.username }}</a>

              <!-- if this user is enabled show this menu -->
              <span *ngIf="u.enabled === true" class="menu-options">
                <a (click)="setUserStatus(u.username, 'False')">Disable</a> |
                <a class="edit" routerLink="/user/duplicate/{{u.username}}">Duplicate</a>
              </span>

              <!-- if this user is disabled show this menu -->
              <span *ngIf="u.enabled === false" class="menu-options">
                <a (click)="setUserStatus(u.username, 'True')">Enable</a> |
                <a class="edit" routerLink="/users/duplicate/{{u.username}}">Duplicate</a> |
                <a (click)="openDialog('delete', u.username)">Delete</a>
              </span>
          </div>

            <!-- <a class="edit" routerLink="/users/edit/{{u.username}}">{{ u.username }}</a> -->

            <!-- if this user is enabled show this menu -->
            <!-- <span class="menu-options">
              <a routerLink="/users/duplicate/{{u.username}}">Duplicate</a> | <a class="edit" (click)="deleteUser(u.username)">Delete</a>
            </span> -->
          </div>
          <div class="table-data mui-col-md-3 user-transparent">{{ u.authorities.sort() }}<!--  Sorted so all roles appear in same order   -->
          </div>
          <div class="table-data mui-col-md-4 user-transparent">
            <ul>
              <li *ngFor="let virtue of u.virtueTemplateIds">{{ getVirtueName(virtue) }}</li>
            </ul>
          </div>
          <div class="table-data mui-col-md-3 user-transparent">
            {{ u.enabled ? 'Enabled' : 'Disabled' }}
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
      <div class="paging">
        <div class="page-number mui-col-md-4">Page # of #</div>
        <div class="page-controls mui-col-md-4">
          << First | < Previous | Next> | Last >></div>
        <div class="page-item-total mui-col-md-4">{{ totalUsers }} User Accounts</div>
        <div class="clearfix"></div>
      </div>
    </div>
  </div>
</div>
